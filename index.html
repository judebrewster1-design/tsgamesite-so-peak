<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jude Games</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; background: #121212; color: #fff; }
  h1 { margin-top: 20px; }
  ul { list-style: none; padding: 0; }
  li { margin: 20px 0; }
  button { padding: 15px 30px; font-size: 18px; cursor: pointer; }
  #coming-soon { margin: 30px; font-size: 20px; font-weight: bold; color: #ffcc00; }
  #poll { margin-top: 40px; background: #222; padding: 20px; border-radius: 10px; display: inline-block; }
  .vote-count { margin-top: 10px; font-size: 16px; }
</style>
</head>
<body>

<h1>Jude Games</h1>

<ul>
  <li><button onclick="window.location.href='click_a_jude.html'">Click-A-Jude</button></li>
  <li><button onclick="window.location.href='flappy_jude.html'">Flappy Jude</button></li>
</ul>

<div id="coming-soon">Judeomtry Dash Coming Soonâ€¦</div>

<div id="poll">
  <h2>Community Poll</h2>
  <form id="pollForm">
    <label>
      <input type="radio" name="vote" value="judeomtry"> Judeomtry Dash
    </label><br><br>
    <label>
      <input type="radio" name="vote" value="judescasino"> Jude's Casino
    </label><br><br>
    <button type="submit">Vote</button>
  </form>
  <div class="vote-count" id="voteCounts">
    Loading votes...
  </div>
</div>

<script>
async function fetchVotes() {
  try {
    const res = await fetch('http://localhost:5000/poll');
    const data = await res.json();
    document.getElementById('voteCounts').innerText =
      `Judeomtry Dash: ${data.judeomtry} votes\nJude's Casino: ${data.judescasino} votes`;
  } catch (err) {
    document.getElementById('voteCounts').innerText = 'Failed to load votes.';
  }
}

document.getElementById('pollForm').addEventListener('submit', async e => {
  e.preventDefault();
  const vote = document.querySelector('input[name="vote"]:checked');
  if (!vote) return alert('Select an option!');
  try {
    await fetch('http://localhost:5000/poll', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ vote: vote.value })
    });
    fetchVotes();
  } catch (err) {
    alert('Vote failed.');
  }
});

fetchVotes();
setInterval(fetchVotes, 5000); // refresh every 5 seconds
</script>

</body>
</html>
