<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Flappy Jude + Skins + Blackjack</title>
<style>
body, html { margin:0; padding:0; height:100%; font-family:sans-serif; background:#70c5ce; display:flex; flex-direction:column; align-items:center; }
canvas { border-radius:10px; background:linear-gradient(#70c5ce,#87d6e6); box-shadow:0 4px 12px rgba(0,0,0,0.4); margin-top:20px; }

#banner {
  position:fixed; top:0; width:100%; background:#ffcc00; color:#000; text-align:center;
  padding:12px 0; font-weight:bold; font-size:16px; z-index:100; transition: opacity 1s;
}

#topPanel {
  display:flex; justify-content:space-between; width:480px; max-width:95%;
  margin-top:10px; padding:6px 12px; background:rgba(255,255,255,0.85); border-radius:10px;
  box-shadow:0 2px 6px rgba(0,0,0,0.2); font-weight:bold; font-size:18px;
}

#topPanel span { display:flex; align-items:center; gap:6px; }

#controls { display:flex; gap:10px; margin-top:10px; flex-wrap:wrap; justify-content:center; }
button { padding:10px 16px; border:none; border-radius:8px; cursor:pointer; font-weight:bold; font-size:14px; transition:all 0.2s; }
button:hover { transform:scale(1.05); }

#loot15 { background:#4aa3df; color:#fff; }
#loot30 { background:#1e90ff; color:#fff; }
#loot50 { background:#0c70c2; color:#fff; }
#loot100 { background:#083e77; color:#fff; }
#blackjackBtn { background:#ff5c5c; color:#fff; }

#skins { display:flex; gap:8px; flex-wrap:wrap; justify-content:center; margin-top:10px; }
.skin-box {
  padding:6px 10px; border-radius:6px; border:2px solid #333; cursor:pointer;
  font-weight:bold; transition:all 0.2s; text-align:center;
}
.skin-box:hover { transform:scale(1.1); box-shadow:0 0 8px rgba(0,0,0,0.3); }

#start {
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  padding:16px 24px; font-size:20px; background:#ffd700; color:#000; border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,0.4); cursor:pointer; z-index:10;
}
#start:hover { transform:translate(-50%,-50%) scale(1.05); }

@media(max-width:500px){
  canvas { width:95%; height:auto; }
  #topPanel { width:95%; font-size:16px; }
  button { padding:8px 12px; font-size:13px; }
}
</style>
</head>
<body>

<div id="banner">Huge update! Stayed up till 2 coding this as I haven't been updating recently. Hope y'all enjoy!</div>

<div id="topPanel">
  <span>Score: <span id="score">0</span></span>
  <span>Money: $<span id="money">0</span></span>
</div>

<div id="controls">
  <button id="loot15">Loot $15</button>
  <button id="loot30">Loot $30</button>
  <button id="loot50">Loot $50</button>
  <button id="loot100">Loot $100</button>
  <button id="blackjackBtn">Play Blackjack</button>
</div>

<div id="skins"></div>

<canvas id="c" width="480" height="640"></canvas>
<button id="start">Start Flappy Jude</button>

<script>
// ===== Banner =====
window.addEventListener('load',()=>{
  setTimeout(()=>{ document.getElementById('banner').style.opacity=0; setTimeout(()=>document.getElementById('banner').remove(),1000); },5000);
});

// ===== Game variables =====
const canvas=document.getElementById('c');
const ctx=canvas.getContext('2d');
const w=canvas.width,h=canvas.height;
let birdImg=new Image();
birdImg.src='https://raw.githubusercontent.com/YOUR_USERNAME/YOUR_REPO/main/face.png'; // replace with your GitHub raw URL
let running=false,frames=0,pipes=[],score=0,money=0;
let currentSkin=0;
let skins=[
  {name:'Base Jude', hue:0, anim:false},
  {name:'Blue Jude', hue:200, anim:false},
  {name:'Emerald Jude', hue:120, anim:false},
  {name:'Shadow Jude', hue:0, anim:false, dark:true},
  {name:'Gold Jude', hue:50, anim:false},
  {name:'Rainbow Jude', hue:0, anim:true}
];
currentSkin=0;
updateSkinUI();

// Load money
money=parseInt(localStorage.getItem('money')||0);
document.getElementById('money').textContent=money;

// ===== Bird physics =====
const bird={x:90,y:h/2,r:28,vy:0,gravity:0.2,jump:-8,angle:0};

// ===== Input =====
document.getElementById('start').onclick=startGame;
canvas.addEventListener('click', flap);

// ANY KEY flaps
window.addEventListener('keydown', e => {
    if(!running){ startGame(); return; }
    bird.vy = bird.jump;
    bird.angle = 0;
});

// ===== Pipes =====
function spawnPipe(){ const gap=180; const topH=60+Math.random()*(h-300); pipes.push({x:w+20,top:topH,bottom:topH+gap,w:60,passed:false}); }

// ===== Reset/start =====
function reset(){ bird.x=90; bird.y=h/2; bird.vy=0; bird.angle=0; frames=0; pipes=[]; score=0; document.getElementById('score').textContent=score; }
function startGame(){ reset(); running=true; loop(); document.getElementById('start').style.display='none'; }
function gameOver(){ running=false; ctx.fillStyle='rgba(0,0,0,0.35)'; ctx.fillRect(0,0,w,h); ctx.fillStyle='#fff'; ctx.font='28px Arial'; ctx.textAlign='center'; ctx.fillText('Game Over',w/2,h/2-10); ctx.font='18px Arial'; ctx.fillText('Click or Any Key to retry', w/2,h/2+20); document.getElementById('start').style.display='block'; saveData(); }

// ===== Update =====
function update(){
  frames++;
  if(frames%100===0) spawnPipe();
  bird.vy+=bird.gravity; bird.y+=bird.vy; bird.angle+=(0-bird.angle)*0.06;
  for(let p of pipes){ 
      p.x-=2+Math.min(2,Math.floor(frames/1000)); // slower speed
      if(!p.passed && p.x+p.w<bird.x){ 
          p.passed=true; score++; money++; 
          document.getElementById('score').textContent=score; 
          document.getElementById('money').textContent=money; 
      } 
  }
  pipes=pipes.filter(p=>p.x+p.w>-50);
  if(bird.y+bird.r>h){ bird.y=h-bird.r; gameOver(); return; }
  if(bird.y-bird.r<0){ bird.y=bird.r; bird.vy=0; }
  for(let p of pipes){ 
      if((bird.x+bird.r>p.x && bird.x-bird.r<p.x+p.w) && (bird.y-bird.r<p.top || bird.y+bird.r>p.bottom)){ 
          gameOver(); return; 
      } 
  }
}

// ===== Draw =====
function draw(){
  ctx.clearRect(0,0,w,h);
  // Ground
  ctx.fillStyle='#6cc08a'; 
  ctx.fillRect(0,h-80,w,80);
  // Pipes
  for(let p of pipes){
    ctx.fillStyle='#2b8a52'; 
    ctx.fillRect(p.x,0,p.w,p.top);
    ctx.fillRect(p.x,p.bottom,p.w,h-p.bottom-80);
    ctx.fillStyle='#1f6b3f'; 
    ctx.fillRect(p.x-4,p.top-12,p.w+8,12);
    ctx.fillRect(p.x-4,p.bottom,p.w+8,12);
  }
  // Bird / Jude
  if(birdImg.complete){
    ctx.save();
    ctx.translate(bird.x,bird.y);
    ctx.rotate(0); // no tilt
    let s = skins[currentSkin];
    ctx.filter=(s.name==='Base Jude')?'none':(s.dark)?'brightness(0.3)':`hue-rotate(${s.hue}deg)`;
    const size=bird.r*2*1.6;
    ctx.shadowColor='rgba(255,255,255,0.8)';
    ctx.shadowBlur=10;
    ctx.drawImage(birdImg,-size/2,-size/2,size,size);
    ctx.restore();
  } else { ctx.beginPath(); ctx.fillStyle='#ffdd99'; ctx.arc(bird.x,bird.y,bird.r,0,Math.PI*2); ctx.fill(); }
  // Score
  ctx.fillStyle='#fff'; 
  ctx.font='36px Arial'; 
  ctx.textAlign='left'; 
  ctx.fillText(score,20,48);
}

// ===== Loop =====
function loop(){ if(!running) return; update(); draw(); requestAnimationFrame(loop); }

// ===== Save =====
function saveData(){ localStorage.setItem('money',money); localStorage.setItem('skins',JSON.stringify(skins)); }

// ===== Loot boxes =====
function addLoot(price){
  if(money<price){ alert('Not enough money'); return; }
  money-=price; document.getElementById('money').textContent=money;
  const possibleSkins=[1,2,3,4,5];
  const chosen=possibleSkins[Math.floor(Math.random()*possibleSkins.length)];
  currentSkin=chosen;
  alert('You got: '+skins[chosen].name);
  saveData();
}
document.getElementById('loot15').onclick=()=>addLoot(15);
document.getElementById('loot30').onclick=()=>addLoot(30);
document.getElementById('loot50').onclick=()=>addLoot(50);
document.getElementById('loot100').onclick=()=>addLoot(100);

// ===== Skins UI =====
function updateSkinUI(){
  const container=document.getElementById('skins'); container.innerHTML='';
  skins.forEach((s,i)=>{
    const b=document.createElement('span'); b.textContent=s.name; b.className='skin-box';
    b.onclick=()=>currentSkin=i;
    b.style.color=(s.dark)?'#222':`hsl(${s.hue},80%,50%)`;
    container.appendChild(b);
  });
}
updateSkinUI();

// ===== Rainbow animation =====
setInterval(()=>{ if(skins[currentSkin].anim) skins[currentSkin].hue=(skins[currentSkin].hue+3)%360; },50);

// ===== Blackjack =====
document.getElementById('blackjackBtn').onclick=()=>playBlackjack();
function playBlackjack(){
  let playerMoney=money;
  let bet=parseInt(prompt(`Your money: $${playerMoney}\nEnter bet:`));
  if(isNaN(bet)||bet>playerMoney||bet<=0){ alert('Invalid bet'); return; }
  const deck=shuffle([...Array(52).keys()]);
  function cardValue(c){ const v=(c%13)+1; return v>10?10:v; }
  let player=[deck.pop(),deck.pop()],dealer=[deck.pop(),deck.pop()];
  function handValue(h){ let val=h.reduce((a,c)=>a+cardValue(c),0); let aces=h.filter(x=>cardValue(x)===1).length; while(val+10<=21 && aces>0){ val+=10; aces--; } return val; }
  let ph=handValue(player), dh=handValue([dealer[0]]);
  while(confirm(`Dealer shows ${dealer[0]%13+1}\nYour hand: ${player.map(x=>x%13+1).join(',')} = ${ph}\nHit?`)){ player.push(deck.pop()); ph=handValue(player); if(ph>21) break; }
  let dh2=handValue(dealer); while(dh2<17){ dealer.push(deck.pop()); dh2=handValue(dealer); }
  let result='';
  if(ph>21) result='Lose';
  else if(dh2>21||ph>dh2) result='Win';
  else if(ph===dh2) result='Push';
  else result='Lose';
  if(result==='Win') money+=bet;
  if(result==='Lose') money-=bet;
  document.getElementById('money').textContent=money;
  alert(`Dealer: ${dealer.map(x=>x%13+1).join(',')} = ${dh2}\nYour hand: ${player.map(x=>x%13+1).join(',')} = ${ph}\nResult: ${result}`);
  saveData();
}
function shuffle(array){ let a=array.slice(); for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }

// ===== Flap function =====
function flap(){ bird.vy=bird.jump; bird.angle=0; }

</script>
</body>
</html>
