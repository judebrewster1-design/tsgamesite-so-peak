<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JudeCeno Game Hub</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
         background: linear-gradient(135deg, #00081b 33%, #00ff6a 67%);

            height: 100vh;
            overflow: hidden;
            color: white;
        }

        .container {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .menu {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            transition: all 0.5s ease;
        }

        .menu.hidden {
            display: none;
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            max-width: 1000px;
            padding: 20px;
        }

        .game-tile {
            background: rgba(255, 5, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .game-tile:hover {
            transform: translateY(-10px);
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .game-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .game-name {
            font-size: 24px;
            font-weight: bold;
        }

        .game-area {
            display: none;
            height: 100vh;
            flex-direction: column;
        }

        .game-header {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .game-title {
            font-size: 32px;
            margin-bottom: 5px;
        }

        .game-subtitle {
            font-size: 18px;
            opacity: 0.8;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #ff4757;
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            font-weight: bold;
        }

        .game-content {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .betting-controls {
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .balance-display {
            font-size: 24px;
            font-weight: bold;
        }

        .bet-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .bet-input {
            padding: 10px;
            border: none;
            border-radius: 5px;
            width: 100px;
            text-align: center;
            font-size: 16px;
        }

        .bet-btn, .quick-play-btn {
            background: #5dade2;
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .bet-btn:hover, .quick-play-btn:hover {
            background: #3498db;
            transform: translateY(-2px);
        }

        .log-area {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            max-width: 300px;
            max-height: 200px;
            overflow-y: auto;
            font-size: 14px;
            z-index: 10;
        }

        .win-overlay {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: #f39c12;
            padding: 30px 50px;
            border-radius: 15px;
            font-size: 32px;
            font-weight: bold;
            z-index: 1000;
            display: none;
            text-align: center;
        }

        /* Plinko Styles */
        .plinko-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .plinko-board {
            width: 500px;
            height: 600px;
            background: rgba(255, 255, 255, 0.1);
            border: 3px solid white;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }

        .peg {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #fff;
            border-radius: 50%;
        }

        .ball {
            position: absolute;
            width: 15px;
            height: 15px;
            background: #f39c12;
            border-radius: 50%;
            z-index: 5;
        }

        .buckets {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 60px;
            display: flex;
        }

        .bucket {
            flex: 1;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Mines Styles */
        .mines-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .mines-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .mines-grid {
            display: grid;
            grid-template-columns: repeat(5, 60px);
            grid-template-rows: repeat(5, 60px);
            gap: 5px;
        }

        .mine-tile {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid white;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .mine-tile:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .mine-tile.safe {
            background: #2ecc71;
        }

        .mine-tile.mine {
            background: #e74c3c;
        }

        /* Blackjack Styles */
        .blackjack-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            padding: 20px;
        }

        .dealer-area, .player-area {
            text-align: center;
        }

        .cards {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
        }

        .card {
            width: 70px;
            height: 100px;
            background: white;
            border: 2px solid #333;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #333;
            font-weight: bold;
        }

        .card.red {
            color: #e74c3c;
        }

        .card.hidden {
            background: #34495e;
        }

        .game-buttons {
            display: flex;
            gap: 15px;
        }

        .game-btn {
            background: #e67e22;
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        .game-btn:hover {
            background: #d35400;
        }

        /* Poker Styles */
        .poker-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            padding: 20px;
        }

        .poker-hand {
            display: flex;
            gap: 10px;
        }

        .poker-card {
            width: 80px;
            height: 110px;
            background: white;
            border: 3px solid #333;
            border-radius: 8px;
            cursor: pointer;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #333;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .poker-card.held {
            border-color: #f39c12;
            transform: translateY(-10px);
        }

        .poker-card.red {
            color: #e74c3c;
        }

        /* Roulette Styles */
        .roulette-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        .roulette-wheel {
            width: 300px;
            height: 300px;
            border: 10px solid #ffd700;
            border-radius: 50%;
            position: relative;
            background: conic-gradient(
                #e74c3c 0deg 36deg,
                #2c3e50 36deg 72deg,
                #e74c3c 72deg 108deg,
                #2c3e50 108deg 144deg,
                #e74c3c 144deg 180deg,
                #2c3e50 180deg 216deg,
                #e74c3c 216deg 252deg,
                #2c3e50 252deg 288deg,
                #e74c3c 288deg 324deg,
                #27ae60 324deg 360deg
            );
        }

        .roulette-ball {
            position: absolute;
            top: 10px;
            left: 50%;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        .roulette-bets {
            display: flex;
            gap: 15px;
        }

        .roulette-bet {
            padding: 15px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            color: white;
        }

        .bet-red { background: #e74c3c; }
        .bet-black { background: #2c3e50; }
        .bet-green { background: #27ae60; }
        .bet-money { background: #f39c12; }

        /* Slots Styles */
        .slots-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        .slots-machine {
            display: flex;
            gap: 10px;
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 15px;
        }

        .slot-reel {
            width: 100px;
            height: 120px;
            background: white;
            border: 3px solid #333;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            overflow: hidden;
            position: relative;
        }

        .spin-btn {
            background: #e74c3c;
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .game-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
                padding: 15px;
            }

            .game-tile {
                padding: 20px;
            }

            .game-icon {
                font-size: 36px;
            }

            .game-name {
                font-size: 18px;
            }

            .betting-controls {
                flex-direction: column;
                align-items: center;
            }

            .plinko-board {
                width: 350px;
                height: 450px;
            }

            .mines-grid {
                grid-template-columns: repeat(5, 50px);
                grid-template-rows: repeat(5, 50px);
            }

            .roulette-wheel {
                width: 250px;
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Main Menu -->
        <div id="menu" class="menu">
            <div class="game-grid">
                <div class="game-tile" onclick="openGame('plinko')" data-key="1">
                    <div class="game-icon">🎯</div>
                    <div class="game-name">PLINKO</div>
                </div>
                <div class="game-tile" onclick="openGame('mines')" data-key="2">
                    <div class="game-icon">💣</div>
                    <div class="game-name">MINES</div>
                </div>
                <div class="game-tile" onclick="openGame('blackjack')" data-key="3">
                    <div class="game-icon">🃏</div>
                    <div class="game-name">BLACKJACK</div>
                </div>
                <div class="game-tile" onclick="openGame('roulette')" data-key="4">
                    <div class="game-icon">🎰</div>
                    <div class="game-name">ROULETTE</div>
                </div>
                <div class="game-tile" onclick="openGame('poker')" data-key="5">
                    <div class="game-icon">🎲</div>
                    <div class="game-name">POKER</div>
                </div>
            </div>
        </div>

        <!-- Game Areas -->
        <!-- Plinko Game -->
        <div id="plinko-game" class="game-area">
            <div class="game-header">
                <button class="close-btn" onclick="closeGame()">&times;</button>
                <div class="game-title">PLINKO</div>
                <div class="game-subtitle">Drop balls and watch them bounce!</div>
            </div>
            <div class="game-content">
                <div class="log-area" id="plinko-log"></div>
                <div class="plinko-container">
                    <canvas id="plinko-canvas" width="500" height="600"></canvas>
                </div>
            </div>
            <div class="betting-controls">
                <div class="balance-display">Balance: $<span id="balance">1000</span></div>
                <div class="bet-controls">
                    <input type="number" class="bet-input" id="bet-amount" value="10" min="1">
                    <button class="bet-btn" onclick="setBet(5)">$5</button>
                    <button class="bet-btn" onclick="setBet(25)">$25</button>
                    <button class="bet-btn" onclick="setBet(100)">$100</button>
                    <button class="quick-play-btn" onclick="quickPlay()">Quick Play</button>
                </div>
            </div>
        </div>

        <!-- Mines Game -->
        <div id="mines-game" class="game-area">
            <div class="game-header">
                <button class="close-btn" onclick="closeGame()">&times;</button>
                <div class="game-title">MINES</div>
                <div class="game-subtitle">Find safe tiles and avoid the mines!</div>
            </div>
            <div class="game-content">
                <div class="log-area" id="mines-log"></div>
                <div class="mines-container">
                    <div class="mines-controls">
                        <label>Mines:</label>
                        <select id="mines-count">
                            <option value="3">3 Mines</option>
                            <option value="5" selected>5 Mines</option>
                            <option value="7">7 Mines</option>
                            <option value="10">10 Mines</option>
                        </select>
                        <button class="game-btn" onclick="startMinesGame()">New Game</button>
                        <button class="game-btn" onclick="cashoutMines()" id="mines-cashout" disabled>Cashout</button>
                        <div>Multiplier: <span id="mines-multiplier">1.00x</span></div>
                    </div>
                    <div class="mines-grid" id="mines-grid"></div>
                </div>
            </div>
            <div class="betting-controls">
                <div class="balance-display">Balance: $<span class="balance">1000</span></div>
                <div class="bet-controls">
                    <input type="number" class="bet-input bet-input-shared" value="10" min="1">
                    <button class="bet-btn" onclick="setBet(5)">$5</button>
                    <button class="bet-btn" onclick="setBet(25)">$25</button>
                    <button class="bet-btn" onclick="setBet(100)">$100</button>
                    <button class="quick-play-btn" onclick="quickPlay()">Quick Play</button>
                </div>
            </div>
        </div>

        <!-- Blackjack Game -->
        <div id="blackjack-game" class="game-area">
            <div class="game-header">
                <button class="close-btn" onclick="closeGame()">&times;</button>
                <div class="game-title">BLACKJACK</div>
                <div class="game-subtitle">Get as close to 21 as possible!</div>
            </div>
            <div class="game-content">
                <div class="log-area" id="blackjack-log"></div>
                <div class="blackjack-container">
                    <div class="dealer-area">
                        <h3>Dealer (Score: <span id="dealer-score">0</span>)</h3>
                        <div class="cards" id="dealer-cards"></div>
                    </div>
                    <div class="game-buttons" id="blackjack-buttons">
                        <button class="game-btn" onclick="dealBlackjack()">Deal</button>
                        <button class="game-btn" onclick="hitBlackjack()" id="hit-btn" disabled>Hit</button>
                        <button class="game-btn" onclick="standBlackjack()" id="stand-btn" disabled>Stand</button>
                    </div>
                    <div class="player-area">
                        <h3>Player (Score: <span id="player-score">0</span>)</h3>
                        <div class="cards" id="player-cards"></div>
                    </div>
                </div>
            </div>
            <div class="betting-controls">
                <div class="balance-display">Balance: $<span class="balance">1000</span></div>
                <div class="bet-controls">
                    <input type="number" class="bet-input bet-input-shared" value="10" min="1">
                    <button class="bet-btn" onclick="setBet(5)">$5</button>
                    <button class="bet-btn" onclick="setBet(25)">$25</button>
                    <button class="bet-btn" onclick="setBet(100)">$100</button>
                    <button class="quick-play-btn" onclick="quickPlay()">Quick Play</button>
                </div>
            </div>
        </div>

        <!-- Poker Game -->
        <div id="poker-game" class="game-area">
            <div class="game-header">
                <button class="close-btn" onclick="closeGame()">&times;</button>
                <div class="game-title">POKER</div>
                <div class="game-subtitle">5-Card Draw Poker</div>
            </div>
            <div class="game-content">
                <div class="log-area" id="poker-log"></div>
                <div class="poker-container">
                    <div class="dealer-area">
                        <h3>Dealer Hand</h3>
                        <div class="poker-hand" id="dealer-poker-cards"></div>
                        <div id="dealer-poker-hand">-</div>
                    </div>
                    <div class="game-buttons" id="poker-buttons">
                        <button class="game-btn" onclick="dealPoker()">Deal</button>
                        <button class="game-btn" onclick="drawPoker()" id="draw-btn" disabled>Draw</button>
                        <button class="game-btn" onclick="evaluatePoker()" id="evaluate-btn" disabled>Evaluate</button>
                    </div>
                    <div class="player-area">
                        <h3>Your Hand (Click cards to hold)</h3>
                        <div class="poker-hand" id="player-poker-cards"></div>
                        <div id="player-poker-hand">-</div>
                    </div>
                </div>
            </div>
            <div class="betting-controls">
                <div class="balance-display">Balance: $<span class="balance">1000</span></div>
                <div class="bet-controls">
                    <input type="number" class="bet-input bet-input-shared" value="10" min="1">
                    <button class="bet-btn" onclick="setBet(5)">$5</button>
                    <button class="bet-btn" onclick="setBet(25)">$25</button>
                    <button class="bet-btn" onclick="setBet(100)">$100</button>
                    <button class="quick-play-btn" onclick="quickPlay()">Quick Play</button>
                </div>
            </div>
        </div>

        <!-- Roulette Game -->
        <div id="roulette-game" class="game-area">
            <div class="game-header">
                <button class="close-btn" onclick="closeGame()">&times;</button>
                <div class="game-title">ROULETTE</div>
                <div class="game-subtitle">Spin the wheel and place your bets!</div>
            </div>
            <div class="game-content">
                <div class="log-area" id="roulette-log"></div>
                <div class="roulette-container">
                    <div class="roulette-wheel" id="roulette-wheel">
                        <div class="roulette-ball" id="roulette-ball"></div>
                    </div>
                    <div class="roulette-bets">
                        <button class="roulette-bet bet-red" onclick="setBetType('red')">Red (2x)</button>
                        <button class="roulette-bet bet-black" onclick="setBetType('black')">Black (2x)</button>
                        <button class="roulette-bet bet-green" onclick="setBetType('green')">Green (36x)</button>
                        <button class="roulette-bet bet-money" onclick="setBetType('money')">💰 (50x)</button>
                    </div>
                    <button class="spin-btn" onclick="spinRoulette()" id="spin-btn">SPIN</button>
                    <div>Current Bet: <span id="current-bet-type">None</span></div>
                </div>
            </div>
            <div class="betting-controls">
                <div class="balance-display">Balance: $<span class="balance">1000</span></div>
                <div class="bet-controls">
                    <input type="number" class="bet-input bet-input-shared" value="10" min="1">
                    <button class="bet-btn" onclick="setBet(5)">$5</button>
                    <button class="bet-btn" onclick="setBet(25)">$25</button>
                    <button class="bet-btn" onclick="setBet(100)">$100</button>
                    <button class="quick-play-btn" onclick="quickPlay()">Quick Play</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Win Overlay -->
    <div id="win-overlay" class="win-overlay">
        <div>🎉 YOU WON! 🎉</div>
        <div id="win-amount">$0</div>
    </div>

    <script>
        // Global Game State
        let gameState = {
            balance: 1000,
            currentGame: null,
            currentBet: 10,
            plinko: { balls: [] },
            mines: { 
                gameActive: false, 
                safeTiles: 0, 
                multiplier: 1.0, 
                minePositions: [],
                revealedTiles: []
            },
            blackjack: {
                playerCards: [],
                dealerCards: [],
                gameActive: false,
                playerScore: 0,
                dealerScore: 0
            },
            poker: {
                playerCards: [],
                dealerCards: [],
                heldCards: [],
                gameActive: false
            },
            roulette: {
                betType: null,
                spinning: false
            },
            slots: {
                spinning: false,
                reels: ['💰', '💰', '💰']
            }
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateBalanceDisplay();
            setupKeyboardShortcuts();
            initializePlinko();
        });

        // Keyboard shortcuts
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', function(e) {
                if (gameState.currentGame === null) {
                    switch(e.key) {
                        case '1': openGame('plinko'); break;
                        case '2': openGame('mines'); break;
                        case '3': openGame('blackjack'); break;
                        case '4': openGame('roulette'); break;
                        case '5': openGame('poker'); break;
                    }
                }
            });
        }

        // Game Navigation
        function openGame(gameName) {
            document.getElementById('menu').classList.add('hidden');
            document.getElementById(gameName + '-game').style.display = 'flex';
            gameState.currentGame = gameName;
            
            // Initialize game-specific elements
            if (gameName === 'mines') {
                createMinesGrid();
            }
            
            updateBetInputs();
            updateBalanceDisplay();
        }

        function closeGame() {
            if (gameState.currentGame) {
                document.getElementById(gameState.currentGame + '-game').style.display = 'none';
            }
            document.getElementById('menu').classList.remove('hidden');
            gameState.currentGame = null;
            
            // Reset game states
            resetAllGames();
        }

        function resetAllGames() {
            gameState.mines.gameActive = false;
            gameState.blackjack.gameActive = false;
            gameState.poker.gameActive = false;
            gameState.roulette.spinning = false;
        }

        // Betting System
        function setBet(amount) {
            if (amount <= gameState.balance) {
                gameState.currentBet = amount;
                updateBetInputs();
            }
        }

        function updateBetInputs() {
            const inputs = document.querySelectorAll('.bet-input, .bet-input-shared');
            inputs.forEach(input => {
                input.value = gameState.currentBet;
            });
        }

        function updateBalanceDisplay() {
            const displays = document.querySelectorAll('.balance, #balance');
            displays.forEach(display => {
                display.textContent = gameState.balance;
            });
        }

        function getBetAmount() {
            const input = document.querySelector('.bet-input, .bet-input-shared');
            const amount = parseInt(input.value) || 10;
            gameState.currentBet = amount;
            return Math.min(amount, gameState.balance);
        }

        function processBet(winAmount = 0) {
            const betAmount = getBetAmount();
            if (betAmount > gameState.balance) return false;
            
            gameState.balance -= betAmount;
            if (winAmount > 0) {
                gameState.balance += winAmount;
                showWinOverlay(winAmount);
            }
            
            updateBalanceDisplay();
            return true;
        }

        function showWinOverlay(amount) {
            const overlay = document.getElementById('win-overlay');
            const amountDisplay = document.getElementById('win-amount');
            amountDisplay.textContent = '$' + amount;
            overlay.style.display = 'block';
            
            setTimeout(() => {
                overlay.style.display = 'none';
            }, 2200);
        }

        function addLog(gameId, message) {
            const logElement = document.getElementById(gameId + '-log');
            if (logElement) {
                const entry = document.createElement('div');
                entry.textContent = new Date().toLocaleTimeString() + ': ' + message;
                logElement.appendChild(entry);
                logElement.scrollTop = logElement.scrollHeight;
            }
        }

        // Quick Play Function
        function quickPlay() {
            switch(gameState.currentGame) {
                case 'plinko':
                    dropBall();
                    break;
                case 'mines':
                    if (!gameState.mines.gameActive) startMinesGame();
                    break;
                case 'blackjack':
                    if (!gameState.blackjack.gameActive) dealBlackjack();
                    break;
                case 'poker':
                    if (!gameState.poker.gameActive) dealPoker();
                    break;
                case 'roulette':
                    if (!gameState.roulette.spinning && gameState.roulette.betType) spinRoulette();
                    break;
            }
        }

        // PLINKO GAME
        function initializePlinko() {
            const canvas = document.getElementById('plinko-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            
            // Create pegs in triangular pattern
            gameState.plinko.pegs = [];
            const rows = 12;
            const pegSpacing = 35;
            const startY = 60;
            
            for (let row = 0; row < rows; row++) {
                const pegsInRow = row + 3;
                const startX = (canvas.width - (pegsInRow - 1) * pegSpacing) / 2;
                
                for (let col = 0; col < pegsInRow; col++) {
                    gameState.plinko.pegs.push({
                        x: startX + col * pegSpacing,
                        y: startY + row * 40,
                        radius: 4
                    });
                }
            }
            
            // Create buckets
            gameState.plinko.buckets = [
                { multiplier: 10, x: 0, width: canvas.width / 8 },
                { multiplier: 2, x: canvas.width / 8, width: canvas.width / 8 },
                { multiplier: 1.5, x: canvas.width / 4, width: canvas.width / 8 },
                { multiplier: 1, x: 3 * canvas.width / 8, width: canvas.width / 4 },
                { multiplier: 1.5, x: 5 * canvas.width / 8, width: canvas.width / 8 },
                { multiplier: 2, x: 3 * canvas.width / 4, width: canvas.width / 8 },
                { multiplier: 10, x: 7 * canvas.width / 8, width: canvas.width / 8 }
            ];
            
            gameState.plinko.balls = [];
            startPlinkoAnimation();
        }

        function dropBall() {
            const betAmount = getBetAmount();
            if (betAmount > gameState.balance) return;
            
            const canvas = document.getElementById('plinko-canvas');
            const ball = {
                x: canvas.width / 2 + (Math.random() - 0.5) * 20,
                y: 10,
                vx: (Math.random() - 0.5) * 2,
                vy: 0,
                radius: 7,
                gravity: 0.3,
                bounce: 0.6,
                betAmount: betAmount
            };
            
            gameState.plinko.balls.push(ball);
            gameState.balance -= betAmount;
            updateBalanceDisplay();
        }

        function startPlinkoAnimation() {
            const canvas = document.getElementById('plinko-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            
            function animate() {
                if (gameState.currentGame !== 'plinko') return;
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw pegs
                ctx.fillStyle = '#fff';
                gameState.plinko.pegs.forEach(peg => {
                    ctx.beginPath();
                    ctx.arc(peg.x, peg.y, peg.radius, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                // Draw buckets
                ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
                ctx.strokeStyle = '#fff';
                gameState.plinko.buckets.forEach(bucket => {
                    ctx.fillRect(bucket.x, canvas.height - 60, bucket.width, 60);
                    ctx.strokeRect(bucket.x, canvas.height - 60, bucket.width, 60);
                    
                    ctx.fillStyle = '#fff';
                    ctx.font = '14px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(bucket.multiplier + 'x', 
                        bucket.x + bucket.width / 2, 
                        canvas.height - 30);
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
                });
                
                // Update and draw balls
                ctx.fillStyle = '#f39c12';
                for (let i = gameState.plinko.balls.length - 1; i >= 0; i--) {
                    const ball = gameState.plinko.balls[i];
                    
                    // Physics
                    ball.vy += ball.gravity;
                    ball.x += ball.vx;
                    ball.y += ball.vy;
                    
                    // Collision with pegs
                    gameState.plinko.pegs.forEach(peg => {
                        const dx = ball.x - peg.x;
                        const dy = ball.y - peg.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < ball.radius + peg.radius) {
                            const angle = Math.atan2(dy, dx);
                            ball.vx = Math.cos(angle) * ball.bounce * 3;
                            ball.vy = Math.sin(angle) * ball.bounce * 3;
                            ball.x = peg.x + Math.cos(angle) * (ball.radius + peg.radius);
                            ball.y = peg.y + Math.sin(angle) * (ball.radius + peg.radius);
                        }
                    });
                    
                    // Wall collisions
                    if (ball.x - ball.radius < 0 || ball.x + ball.radius > canvas.width) {
                        ball.vx *= -ball.bounce;
                        ball.x = ball.x < canvas.width / 2 ? ball.radius : canvas.width - ball.radius;
                    }
                    
                    // Check if ball reached bottom
                    if (ball.y > canvas.height - 70) {
                        const bucket = gameState.plinko.buckets.find(b => 
                            ball.x >= b.x && ball.x < b.x + b.width
                        );
                        
                        if (bucket) {
                            const winAmount = Math.round(ball.betAmount * bucket.multiplier);
                            gameState.balance += winAmount;
                            updateBalanceDisplay();
                            addLog('plinko', `Ball landed in ${bucket.multiplier}x! Won ${winAmount}`);
                            
                            if (winAmount > ball.betAmount) {
                                showWinOverlay(winAmount);
                            }
                        }
                        
                        gameState.plinko.balls.splice(i, 1);
                        continue;
                    }
                    
                    // Draw ball
                    ctx.beginPath();
                    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                requestAnimationFrame(animate);
            }
            
            animate();
        }

        // MINES GAME
        function createMinesGrid() {
            const grid = document.getElementById('mines-grid');
            if (!grid) return;
            
            grid.innerHTML = '';
            
            for (let i = 0; i < 25; i++) {
                const tile = document.createElement('div');
                tile.className = 'mine-tile';
                tile.dataset.index = i;
                tile.onclick = () => clickMineTile(i);
                grid.appendChild(tile);
            }
        }

        function startMinesGame() {
            const betAmount = getBetAmount();
            if (betAmount > gameState.balance) return;
            
            gameState.balance -= betAmount;
            updateBalanceDisplay();
            
            const mineCount = parseInt(document.getElementById('mines-count').value);
            gameState.mines.gameActive = true;
            gameState.mines.safeTiles = 0;
            gameState.mines.multiplier = 1.0;
            gameState.mines.revealedTiles = [];
            gameState.mines.betAmount = betAmount;
            
            // Generate mine positions
            gameState.mines.minePositions = [];
            while (gameState.mines.minePositions.length < mineCount) {
                const pos = Math.floor(Math.random() * 25);
                if (!gameState.mines.minePositions.includes(pos)) {
                    gameState.mines.minePositions.push(pos);
                }
            }
            
            // Reset grid
            const tiles = document.querySelectorAll('.mine-tile');
            tiles.forEach(tile => {
                tile.className = 'mine-tile';
                tile.innerHTML = '';
            });
            
            document.getElementById('mines-cashout').disabled = true;
            document.getElementById('mines-multiplier').textContent = '1.00x';
            addLog('mines', `New game started with ${mineCount} mines!`);
        }

        function clickMineTile(index) {
            if (!gameState.mines.gameActive || gameState.mines.revealedTiles.includes(index)) return;
            
            const tile = document.querySelector(`[data-index="${index}"]`);
            gameState.mines.revealedTiles.push(index);
            
            if (gameState.mines.minePositions.includes(index)) {
                // Hit a mine
                tile.classList.add('mine');
                tile.innerHTML = '💣';
                gameState.mines.gameActive = false;
                
                // Reveal all mines
                gameState.mines.minePositions.forEach(pos => {
                    const mineTile = document.querySelector(`[data-index="${pos}"]`);
                    mineTile.classList.add('mine');
                    mineTile.innerHTML = '💣';
                });
                
                addLog('mines', 'BOOM! You hit a mine. Game over.');
                document.getElementById('mines-cashout').disabled = true;
            } else {
                // Safe tile
                tile.classList.add('safe');
                tile.innerHTML = '<img src="minor.png" style="width: 100%; height: 100%; object-fit: contain;" onerror="this.innerHTML=\'✓\'">';
                
                gameState.mines.safeTiles++;
                
                const safeSpots = 25 - gameState.mines.minePositions.length;
                gameState.mines.multiplier = 1 + (gameState.mines.safeTiles / safeSpots) * 4;
                
                document.getElementById('mines-multiplier').textContent = gameState.mines.multiplier.toFixed(2) + 'x';
                document.getElementById('mines-cashout').disabled = false;
                
                addLog('mines', `Safe tile! Multiplier: ${gameState.mines.multiplier.toFixed(2)}x`);
            }
        }

        function cashoutMines() {
            if (!gameState.mines.gameActive) return;
            
            const winAmount = Math.round(gameState.mines.betAmount * gameState.mines.multiplier);
            gameState.balance += winAmount;
            updateBalanceDisplay();
            
            gameState.mines.gameActive = false;
            document.getElementById('mines-cashout').disabled = true;
            
            addLog('mines', `Cashed out! Won ${winAmount}`);
            showWinOverlay(winAmount);
        }

        // BLACKJACK GAME
        const suits = ['♠', '♥', '♦', '♣'];
        const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];

        function createDeck() {
            const deck = [];
            suits.forEach(suit => {
                ranks.forEach(rank => {
                    deck.push({ suit, rank });
                });
            });
            return shuffle(deck);
        }

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function getCardValue(card) {
            if (card.rank === 'A') return 11;
            if (['J', 'Q', 'K'].includes(card.rank)) return 10;
            return parseInt(card.rank);
        }

        function calculateScore(cards) {
            let score = 0;
            let aces = 0;
            
            cards.forEach(card => {
                if (card.rank === 'A') {
                    aces++;
                    score += 11;
                } else if (['J', 'Q', 'K'].includes(card.rank)) {
                    score += 10;
                } else {
                    score += parseInt(card.rank);
                }
            });
            
            while (score > 21 && aces > 0) {
                score -= 10;
                aces--;
            }
            
            return score;
        }

        function createCardElement(card, hidden = false) {
            const cardEl = document.createElement('div');
            cardEl.className = 'card';
            
            if (hidden) {
                cardEl.classList.add('hidden');
                cardEl.textContent = '?';
                return cardEl;
            }
            
            if (card.suit === '♥' || card.suit === '♦') {
                cardEl.classList.add('red');
            }
            
            let displayRank = card.rank;
            if (card.rank === 'J') {
                cardEl.innerHTML = '<img src="jack.png" style="width: 100%; height: 100%; object-fit: contain;" onerror="this.textContent=\'J\'">';
            } else if (card.rank === 'Q') {
                cardEl.innerHTML = '<img src="queen.png" style="width: 100%; height: 100%; object-fit: contain;" onerror="this.textContent=\'Q\'">';
            } else if (card.rank === 'K') {
                cardEl.innerHTML = '<img src="king.png" style="width: 100%; height: 100%; object-fit: contain;" onerror="this.textContent=\'K\'">';
            } else {
                cardEl.innerHTML = `<div>${displayRank}</div><div>${card.suit}</div>`;
            }
            
            return cardEl;
        }

        function dealBlackjack() {
            const betAmount = getBetAmount();
            if (betAmount > gameState.balance) return;
            
            if (!processBet()) return;
            
            gameState.blackjack.deck = createDeck();
            gameState.blackjack.playerCards = [];
            gameState.blackjack.dealerCards = [];
            gameState.blackjack.gameActive = true;
            
            // Deal initial cards
            gameState.blackjack.playerCards.push(gameState.blackjack.deck.pop());
            gameState.blackjack.dealerCards.push(gameState.blackjack.deck.pop());
            gameState.blackjack.playerCards.push(gameState.blackjack.deck.pop());
            gameState.blackjack.dealerCards.push(gameState.blackjack.deck.pop());
            
            updateBlackjackDisplay();
            
            document.getElementById('hit-btn').disabled = false;
            document.getElementById('stand-btn').disabled = false;
            
            // Check for natural blackjack
            if (calculateScore(gameState.blackjack.playerCards) === 21) {
                standBlackjack();
            }
        }

        function hitBlackjack() {
            if (!gameState.blackjack.gameActive) return;
            
            gameState.blackjack.playerCards.push(gameState.blackjack.deck.pop());
            updateBlackjackDisplay();
            
            const playerScore = calculateScore(gameState.blackjack.playerCards);
            if (playerScore > 21) {
                endBlackjackGame('Player busted! Dealer wins.');
            } else if (playerScore === 21) {
                standBlackjack();
            }
        }

        function standBlackjack() {
            if (!gameState.blackjack.gameActive) return;
            
            // Dealer plays
            while (calculateScore(gameState.blackjack.dealerCards) < 17) {
                gameState.blackjack.dealerCards.push(gameState.blackjack.deck.pop());
            }
            
            updateBlackjackDisplay(true);
            
            const playerScore = calculateScore(gameState.blackjack.playerCards);
            const dealerScore = calculateScore(gameState.blackjack.dealerCards);
            
            let result;
            if (dealerScore > 21) {
                result = 'Dealer busted! You win!';
                const winAmount = gameState.currentBet * 2;
                gameState.balance += winAmount;
                showWinOverlay(winAmount);
            } else if (playerScore > dealerScore) {
                result = 'You win!';
                const winAmount = gameState.currentBet * 2;
                gameState.balance += winAmount;
                showWinOverlay(winAmount);
            } else if (playerScore === dealerScore) {
                result = 'Push! Bet returned.';
                gameState.balance += gameState.currentBet;
            } else {
                result = 'Dealer wins!';
            }
            
            endBlackjackGame(result);
        }

        function updateBlackjackDisplay(showDealerCard = false) {
            const playerCardsEl = document.getElementById('player-cards');
            const dealerCardsEl = document.getElementById('dealer-cards');
            
            playerCardsEl.innerHTML = '';
            dealerCardsEl.innerHTML = '';
            
            gameState.blackjack.playerCards.forEach(card => {
                playerCardsEl.appendChild(createCardElement(card));
            });
            
            gameState.blackjack.dealerCards.forEach((card, index) => {
                const hidden = index === 1 && !showDealerCard && gameState.blackjack.gameActive;
                dealerCardsEl.appendChild(createCardElement(card, hidden));
            });
            
            document.getElementById('player-score').textContent = calculateScore(gameState.blackjack.playerCards);
            
            if (showDealerCard || !gameState.blackjack.gameActive) {
                document.getElementById('dealer-score').textContent = calculateScore(gameState.blackjack.dealerCards);
            } else {
                document.getElementById('dealer-score').textContent = getCardValue(gameState.blackjack.dealerCards[0]);
            }
        }

        function endBlackjackGame(result) {
            gameState.blackjack.gameActive = false;
            document.getElementById('hit-btn').disabled = true;
            document.getElementById('stand-btn').disabled = true;
            updateBalanceDisplay();
            addLog('blackjack', result);
        }

        // POKER GAME
        function dealPoker() {
            const betAmount = getBetAmount();
            if (betAmount > gameState.balance) return;
            
            if (!processBet()) return;
            
            gameState.poker.deck = createDeck();
            gameState.poker.playerCards = [];
            gameState.poker.dealerCards = [];
            gameState.poker.heldCards = [];
            gameState.poker.gameActive = true;
            gameState.poker.betAmount = betAmount;
            
            // Deal 5 cards to each
            for (let i = 0; i < 5; i++) {
                gameState.poker.playerCards.push(gameState.poker.deck.pop());
                gameState.poker.dealerCards.push(gameState.poker.deck.pop());
            }
            
            updatePokerDisplay();
            
            document.getElementById('draw-btn').disabled = false;
            document.getElementById('evaluate-btn').disabled = true;
            
            addLog('poker', 'Cards dealt! Click cards to hold, then draw.');
        }

        function togglePokerHold(index) {
            if (!gameState.poker.gameActive) return;
            
            const cardIndex = gameState.poker.heldCards.indexOf(index);
            if (cardIndex === -1) {
                gameState.poker.heldCards.push(index);
            } else {
                gameState.poker.heldCards.splice(cardIndex, 1);
            }
            
            updatePokerDisplay();
        }

        function drawPoker() {
            if (!gameState.poker.gameActive) return;
            
            // Replace non-held cards
            for (let i = 0; i < 5; i++) {
                if (!gameState.poker.heldCards.includes(i)) {
                    gameState.poker.playerCards[i] = gameState.poker.deck.pop();
                }
            }
            
            updatePokerDisplay();
            document.getElementById('draw-btn').disabled = true;
            document.getElementById('evaluate-btn').disabled = false;
            
            addLog('poker', 'Cards drawn! Click evaluate to see results.');
        }

        function evaluatePoker() {
            if (!gameState.poker.gameActive) return;
            
            const playerHand = evaluatePokerHand(gameState.poker.playerCards);
            const dealerHand = evaluatePokerHand(gameState.poker.dealerCards);
            
            document.getElementById('player-poker-hand').textContent = playerHand.name;
            document.getElementById('dealer-poker-hand').textContent = dealerHand.name;
            
            let result;
            if (playerHand.rank > dealerHand.rank) {
                result = `You win with ${playerHand.name}!`;
                const winAmount = gameState.poker.betAmount * getPokerPayout(playerHand.rank);
                gameState.balance += winAmount;
                showWinOverlay(winAmount);
            } else if (playerHand.rank === dealerHand.rank) {
                result = 'Push! Bet returned.';
                gameState.balance += gameState.poker.betAmount;
            } else {
                result = `Dealer wins with ${dealerHand.name}!`;
            }
            
            gameState.poker.gameActive = false;
            updateBalanceDisplay();
            addLog('poker', result);
        }

        function updatePokerDisplay() {
            const playerCardsEl = document.getElementById('player-poker-cards');
            const dealerCardsEl = document.getElementById('dealer-poker-cards');
            
            playerCardsEl.innerHTML = '';
            dealerCardsEl.innerHTML = '';
            
            gameState.poker.playerCards.forEach((card, index) => {
                const cardEl = createPokerCardElement(card, index);
                if (gameState.poker.heldCards.includes(index)) {
                    cardEl.classList.add('held');
                }
                playerCardsEl.appendChild(cardEl);
            });
            
            if (gameState.poker.gameActive) {
                // Show dealer cards face down during play
                for (let i = 0; i < 5; i++) {
                    const cardEl = document.createElement('div');
                    cardEl.className = 'poker-card';
                    cardEl.style.background = '#34495e';
                    cardEl.textContent = '?';
                    dealerCardsEl.appendChild(cardEl);
                }
            } else {
                // Show dealer cards after evaluation
                gameState.poker.dealerCards.forEach(card => {
                    dealerCardsEl.appendChild(createPokerCardElement(card));
                });
            }
        }

        function createPokerCardElement(card, index = -1) {
            const cardEl = document.createElement('div');
            cardEl.className = 'poker-card';
            
            if (card.suit === '♥' || card.suit === '♦') {
                cardEl.classList.add('red');
            }
            
            if (index !== -1) {
                cardEl.onclick = () => togglePokerHold(index);
            }
            
            if (card.rank === 'J') {
                cardEl.innerHTML = '<img src="jack.png" style="width: 100%; height: 100%; object-fit: contain;" onerror="this.innerHTML=\'J<br>♠\'">';
            } else if (card.rank === 'Q') {
                cardEl.innerHTML = '<img src="queen.png" style="width: 100%; height: 100%; object-fit: contain;" onerror="this.innerHTML=\'Q<br>♠\'">';
            } else if (card.rank === 'K') {
                cardEl.innerHTML = '<img src="king.png" style="width: 100%; height: 100%; object-fit: contain;" onerror="this.innerHTML=\'K<br>♠\'">';
            } else {
                cardEl.innerHTML = `<div>${card.rank}</div><div>${card.suit}</div>`;
            }
            
            return cardEl;
        }

        function evaluatePokerHand(cards) {
            const values = cards.map(card => {
                if (card.rank === 'A') return 14;
                if (card.rank === 'K') return 13;
                if (card.rank === 'Q') return 12;
                if (card.rank === 'J') return 11;
                return parseInt(card.rank);
            }).sort((a, b) => b - a);
            
            const suits = cards.map(card => card.suit);
            const isFlush = suits.every(suit => suit === suits[0]);
            
            const valueCounts = {};
            values.forEach(value => {
                valueCounts[value] = (valueCounts[value] || 0) + 1;
            });
            
            const counts = Object.values(valueCounts).sort((a, b) => b - a);
            const isStraitght = values[0] - values[4] === 4 && new Set(values).size === 5;
            const isRoyalFlush = isFlush && isStraitght && values[0] === 14;
            
            if (isRoyalFlush) return { rank: 10, name: 'Royal Flush' };
            if (isFlush && isStraitght) return { rank: 9, name: 'Straight Flush' };
            if (counts[0] === 4) return { rank: 8, name: 'Four of a Kind' };
            if (counts[0] === 3 && counts[1] === 2) return { rank: 7, name: 'Full House' };
            if (isFlush) return { rank: 6, name: 'Flush' };
            if (isStraitght) return { rank: 5, name: 'Straight' };
            if (counts[0] === 3) return { rank: 4, name: 'Three of a Kind' };
            if (counts[0] === 2 && counts[1] === 2) return { rank: 3, name: 'Two Pair' };
            if (counts[0] === 2 && values[0] >= 11) return { rank: 2, name: 'Jacks or Better' };
            if (counts[0] === 2) return { rank: 1, name: 'Pair' };
            return { rank: 0, name: 'High Card' };
        }

        function getPokerPayout(rank) {
            const payouts = [1, 1, 2, 3, 4, 6, 9, 25, 50, 250, 800];
            return payouts[rank] || 1;
        }

        // ROULETTE GAME
        function setBetType(type) {
            gameState.roulette.betType = type;
            document.getElementById('current-bet-type').textContent = type;
            
            // Update button states
            document.querySelectorAll('.roulette-bet').forEach(btn => {
                btn.style.opacity = '0.7';
            });
            document.querySelector(`.bet-${type}`).style.opacity = '1';
        }

        function spinRoulette() {
            if (gameState.roulette.spinning || !gameState.roulette.betType) return;
            
            const betAmount = getBetAmount();
            if (betAmount > gameState.balance) return;
            
            gameState.balance -= betAmount;
            updateBalanceDisplay();
            
            gameState.roulette.spinning = true;
            document.getElementById('spin-btn').disabled = true;
            
            const wheel = document.getElementById('roulette-wheel');
            const ball = document.getElementById('roulette-ball');
            
            // Determine result
            const outcomes = [
                ...Array(5).fill('red'),
                ...Array(5).fill('black'), 
                'green',
                'money'
            ];
            const result = outcomes[Math.floor(Math.random() * outcomes.length)];
            
            // Animate wheel
            const spins = 5 + Math.random() * 3;
            wheel.style.transition = 'transform 3s ease-out';
            wheel.style.transform = `rotate(${spins * 360}deg)`;
            
            // Animate ball
            ball.style.transition = 'transform 3s ease-out';
            ball.style.transform = `rotate(${-spins * 360 + Math.random() * 360}deg)`;
            
            setTimeout(() => {
                let winAmount = 0;
                let message = `Ball landed on ${result}!`;
                
                if (result === gameState.roulette.betType) {
                    if (result === 'money') {
                        winAmount = betAmount * 50;
                    } else if (result === 'green') {
                        winAmount = betAmount * 36;
                    } else {
                        winAmount = betAmount * 2;
                    }
                    
                    gameState.balance += winAmount;
                    message += ` Won ${winAmount}!`;
                    showWinOverlay(winAmount);
                } else {
                    message += ' No win this time.';
                }
                
                updateBalanceDisplay();
                addLog('roulette', message);
                
                gameState.roulette.spinning = false;
                document.getElementById('spin-btn').disabled = false;
                
                // Reset wheel rotation for next spin
                setTimeout(() => {
                    wheel.style.transition = 'none';
                    ball.style.transition = 'none';
                    wheel.style.transform = 'rotate(0deg)';
                    ball.style.transform = 'rotate(0deg)';
                }, 1000);
            }, 3000);
        }

        // SLOTS GAME (Added to complete the hub)
        function createSlotsGame() {
            // This would be added if slots was requested in the game tiles
            // For now, focusing on the 5 main games requested
        }

        // Initialize bet input listeners
        document.addEventListener('DOMContentLoaded', function() {
            document.addEventListener('input', function(e) {
                if (e.target.classList.contains('bet-input') || e.target.classList.contains('bet-input-shared')) {
                    const value = parseInt(e.target.value) || 1;
                    gameState.currentBet = Math.max(1, Math.min(value, gameState.balance));
                    updateBetInputs();
                }
            });
        });

        // Prevent memory leaks
        function cleanup() {
            gameState.plinko.balls = [];
            // Clear any intervals or timeouts if needed
        }

        // Handle page unload
        window.addEventListener('beforeunload', cleanup);
    </script>
</body>
</html>
