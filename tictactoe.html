<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TicTacToe Online</title>
<style>
  body { font-family: Arial; background: #1e1e1e; color: #fff; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
  h1 { margin-bottom: 10px; }
  #waiting { margin: 20px; }
  #board { display: grid; grid-template-columns: repeat(3, 100px); grid-template-rows: repeat(3, 100px); gap: 5px; }
  .cell { background: #333; display: flex; align-items: center; justify-content: center; font-size: 2rem; cursor: pointer; }
  input, button { padding: 10px; margin: 5px; font-size: 1rem; }
  #status { margin-top: 15px; }
</style>
</head>
<body>

<h1>TicTacToe Online</h1>

<div id="nameForm">
  <input type="text" id="username" placeholder="Enter your name">
  <button onclick="joinGame()">Join Game</button>
</div>

<div id="waiting" style="display:none;">Waiting for another player...</div>

<div id="board" style="display:none;"></div>

<div id="status"></div>

<script>
const bannedWords = ["badword1","badword2"]; // add more banned words
let ws;
let playerSymbol;

function joinGame() {
  const name = document.getElementById("username").value.trim();
  if(!name) { alert("Enter a name"); return; }
  for(const word of bannedWords) {
    if(name.toLowerCase().includes(word)) { alert("Name not allowed"); return; }
  }

  document.getElementById("nameForm").style.display = "none";
  document.getElementById("waiting").style.display = "block";

  // connect to your LocalTunnel URL
const ws = new WebSocket("https://young-wasps-attend.loca.lt");


  ws.onopen = () => {
    ws.send(JSON.stringify({ action: "join", name }));
  };

  ws.onmessage = (event) => {
    const data = JSON.parse(event.data);
    if(data.action === "start") {
      playerSymbol = data.symbol;
      document.getElementById("waiting").style.display = "none";
      startGame();
    } else if(data.action === "board") {
      updateBoard(data.board);
    } else if(data.action === "error") {
      alert(data.error);
    }
  };
}

function startGame() {
  const boardEl = document.getElementById("board");
  boardEl.style.display = "grid";
  boardEl.innerHTML = "";
  for(let i=0;i<3;i++){
    for(let j=0;j<3;j++){
      const cell = document.createElement("div");
      cell.classList.add("cell");
      cell.dataset.x = j;
      cell.dataset.y = i;
      cell.onclick = () => makeMove(j,i);
      boardEl.appendChild(cell);
    }
  }
}

function makeMove(x,y) {
  ws.send(JSON.stringify({ action: "move", x, y }));
}

function updateBoard(board) {
  const boardEl = document.getElementById("board");
  boardEl.childNodes.forEach(cell => {
    const x = parseInt(cell.dataset.x);
    const y = parseInt(cell.dataset.y);
    cell.textContent = board[y][x];
  });
}
</script>

</body>
</html>
